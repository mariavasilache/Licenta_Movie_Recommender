@model Licenta_Movie_Recommender.Models.Movie
@{
    bool inWatchlist = ViewData["InWatchlist"] as bool? ?? false;
    bool isWatched = ViewData["IsWatched"] as bool? ?? false;
}


<div class="card bg-transparent border-0 movie-card position-relative h-100 shadow-sm">

    <div class="movie-actions position-absolute top-0 end-0 p-2 d-flex flex-column gap-2" style="z-index: 10;">
        <button type="button" class="btn btn-sm @(inWatchlist ? "btn-warning" : "btn-outline-light") btn-watchlist-toggle" data-movie-id="@Model.Id">
            <i class="bi @(inWatchlist ? "bi-bookmark-fill" : "bi-bookmark")"></i>
        </button>

        <button type="button" class="btn btn-sm @(isWatched ? "btn-success" : "btn-outline-light") btn-watched-toggle" data-movie-id="@Model.Id">
            <i class="bi @(isWatched ? "bi-check-circle-fill" : "bi-check-circle")"></i>
        </button>
    </div>

    <a href="/Movies/Details/@Model.Id" class="text-decoration-none d-block position-relative bg-dark rounded shadow" style="aspect-ratio: 2/3; overflow: hidden;">
        <img src="@Model.PosterUrl" class="card-img-top w-100 h-100" style="object-fit: cover;" onerror="this.src='https://placehold.co/300x450/2b2b2b/ffffff?text=@Model.Title'">
    </a>

    <div class="card-body px-1 py-2 text-center" style="min-height: 65px;">
        <h6 class="card-title text-light text-truncate mb-0" style="font-size: 0.92rem;">@Model.Title</h6>
        @if (!string.IsNullOrEmpty(Model.Genres))
        {
            <small class="text-muted d-block text-truncate mt-1" style="font-size: 0.75rem; opacity: 0.7;">@Model.Genres.Split('|')[0]</small>
        }
    </div>
</div>